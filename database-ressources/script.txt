DROP SCHEMA IF EXISTS project CASCADE;
CREATE SCHEMA project;

CREATE TABLE project.teachers(
    teacher_id SERIAL PRIMARY KEY,
    last_name varchar(25) NOT NULL,
    first_name varchar(25) NOT NULL,
    mail varchar(100) NOT NULL,
    user_password varchar(100) NOT NULL
);


CREATE TABLE project.courses(
    course_id SERIAL PRIMARY KEY,
    name varchar(50) NOT NULL,
    code varchar(10) unique NOT NULL,
    presentation varchar(200) NOT NULL,
    picture varchar(100) NULL

);

CREATE TABLE project.students(
    student_id SERIAL PRIMARY KEY,
    last_name varchar(25) NOT NULL,
    first_name varchar(25) NOT NULL,
    mail varchar(100) NOT NULL,
    user_password varchar(100) NOT NULL
);


CREATE TABLE project.professors_courses (
    teacher integer NOT NULL REFERENCES project.teachers(teacher_id),
    course integer NOT NULL REFERENCES project.courses(course_id),
    PRIMARY KEY (teacher, course)
);


CREATE TABLE project.quizzes (
    quizz_id SERIAL PRIMARY KEY,
    creation_date date NOT NULL,
    course integer NOT NULL REFERENCES project.courses(course_id),
    isOnline boolean NOT NULL DEFAULT false
);


CREATE TABLE project.questions (
    question_id SERIAL PRIMARY KEY,
    quizz integer NOT NULL REFERENCES project.quizzes(quizz_id),
    number SERIAL NOT NULL,
    content varchar(200) NOT NULL,
    UNIQUE (question_id, number)
);

CREATE TABLE project.answers (
    answers_id SERIAL PRIMARY KEY,
    question integer NOT NULL REFERENCES project.questions(question_id),
    content varchar(200) NOT NULL,
    correct boolean NOT NULL,
    good_answer_feedback varchar(200)
);

CREATE TABLE project.registered_questions (
    id_registered_question SERIAL PRIMARY KEY,
    question integer NOT NULL REFERENCES project.questions(question_id),
    student integer NOT NULL references project.students(student_id)
);


CREATE TABLE project.personal_notes (
    id_personal_note SERIAL PRIMARY KEY ,
    content varchar(500),
    registered_question integer NOT NULL references project.registered_questions(id_registered_question),
    registered_date date NOT NULL
);
